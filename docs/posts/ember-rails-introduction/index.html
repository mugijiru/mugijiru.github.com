<!DOCTYPE html>
<html lang="en">
    <head>
        
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2903738-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2903738-8');
</script>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="ちょっとした事情で Ember.js 入門的なサムシングをすることになったけどどうせなら公開情報にしちゃえって気持ちになったので資料化する前にブログの記事にし" />
<meta name="keywords" content="blog,developer,personal" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://mugijiru.github.io/posts/ember-rails-introduction/" />


    <title>
        
            ember-rails アプリケーション保守入門 :: 麦汁三昧 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.b78c3be9451dc4ca61ca377f3dc2cf2e6345a44c2bae46216a322ef366daa399.css">


    
        <link rel="stylesheet" type="text/css" href="/css/amazon.css">
    

    
        <link rel="stylesheet" type="text/css" href="/css/adsense.css">
    


    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">



  <meta itemprop="name" content="ember-rails アプリケーション保守入門">
  <meta itemprop="description" content="ちょっとした事情で Ember.js 入門的なサムシングをすることになったけどどうせなら公開情報にしちゃえって気持ちになったので資料化する前にブログの記事にし">
  <meta itemprop="datePublished" content="2021-05-24T09:02:00+09:00">
  <meta itemprop="dateModified" content="2021-05-24T09:02:00+09:00">
  <meta itemprop="wordCount" content="8448">
  <meta itemprop="keywords" content="Rails,Ember-Js">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ember-rails アプリケーション保守入門">
  <meta name="twitter:description" content="ちょっとした事情で Ember.js 入門的なサムシングをすることになったけどどうせなら公開情報にしちゃえって気持ちになったので資料化する前にブログの記事にし">





    <meta property="article:section" content="Rails" />

    <meta property="article:section" content="Ember-js" />



    <meta property="article:published_time" content="2021-05-24 09:02:00 &#43;0900 JST" />






<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2857297565325683" crossorigin="anonymous"></script>


    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text ">
                $ cd /home/mugijiru</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/profile/">Profile</a></li><li><a href="/projects/">Projects</a></li><li><a href="/posts/">Blog</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        17 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://mugijiru.github.io/posts/ember-rails-introduction/">ember-rails アプリケーション保守入門</a>
      </h1>

      

      <div class="post-content">
        <p>ちょっとした事情で Ember.js 入門的なサムシングをすることになったけどどうせなら公開情報にしちゃえって気持ちになったので資料化する前にブログの記事にしちゃうぞ、というエントリです。</p>
<h2 id="想定する読者">想定する読者</h2>
<p>携わっているシステムが ember-rails を利用して作られているために令和になっても 2018 年にサポートが切れてしまった <a href="mailto:Ember.js@2.18">Ember.js@2.18</a> のアプリケーションをなんとか動かし続けないといけない哀れな子羊たち</p>
<h2 id="記事を書いている人">記事を書いている人</h2>
<p>Rails と Ember.js と Vue.js での開発をしたことがある人。
React や Angular はやったことない。なので比較には Rails と Vue.js を出しがち</p>
<h2 id="この記事で書かないこと">この記事で書かないこと</h2>
<p>既に存在してしまっている ember-rails アプリケーションの保守をする人達向けの記事なので、
ember-rails を使って新規で Ember.js アプリを構築する、みたいなことは書きません。</p>
<p>それに今更 ember-rails で構築するのはよろしくないですし、
Rails で Ember.js やりたいなら <a href="https://github.com/thoughtbot/ember-cli-rails">ember-cli-rails</a> にしておいた方が良いですよ。</p>
<p>どうしても構築から知りたい人は
<a href="https://github.com/mugijiru/ember-rails-todo-app/compare/9f190efb6320e19a80768b0c6a37e1929e9c4146...b18270e90c694f14e0fac5df2cb9aadad41376c5">ember-rails-todo-app で ember-rails アプリを構築したあたりのコミット</a>
を見たりとかしたらなんとなくわかるかもだけどまああんまり要らないよね。</p>
<h2 id="ember-dot-js-と-ember-rails-の簡単な紹介">Ember.js と ember-rails の簡単な紹介</h2>
<h3 id="ember-dot-js-とは">Ember.js とは</h3>
<p><a href="https://emberjs.com/">Ember.js</a> はWebフロントエンドMVCフレームワークの1種。昔流行ったよね WebフロントエンドMVC。残念ながら最近はもう主流ではない。</p>
<p>Ruby on Rails の影響を受けてるようなので、
Rails エンジニアが取っ付きやすいフレームワークになっている。多分。</p>
<h3 id="ember-rails-とは">ember-rails とは</h3>
<p><a href="https://github.com/emberjs/ember-rails">ember-rails</a> は Ember.js をいい感じに Rails と連携してくれる素敵な Gem です。これを使うと Rails 上で動く Ember.js アプリケーションが簡単に作れる。</p>
<p>Ember.js 自体が <a href="https://rubygems.org/gems/ember-source/versions/2.18.1?locale=ja">ember-source</a> という Gem を提供してくれていたのでそれらのソースも依存関係で入って来てくれる便利なやつ。</p>
<p>だけどそういう蜜月も <a href="mailto:Ember.js@2.18">Ember.js@2.18</a> の頃までのお話なので今から新規で Rails の上で Ember.js を触りたい子は大人しく <a href="https://github.com/thoughtbot/ember-cli-rails">ember-cli-rails</a> を使いましょう。</p>
<h2 id="rails-側の設定">Rails 側の設定</h2>
<h3 id="gem-の-install">Gem の install</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>gem <span style="color:#e6db74">&#39;ember-rails&#39;</span>
</span></span><span style="display:flex;"><span>gem <span style="color:#e6db74">&#39;active_model_serializers&#39;</span>, <span style="color:#e6db74">&#39;~&gt; 0.9.0&#39;</span>
</span></span></code></pre></div><p>多分このあたりを入れておけば良い。
active_model_serializers は
<a href="https://github.com/emberjs/ember-rails/blob/3ff45327d1320376715b365f0319192a35dc1d56/ember-rails.gemspec#L16">ember-rails の gemspec でバージョン指定がされてない</a> けど
Ember.js 側で使う active-model-adapter が 0.9 系対応なのでバージョンをこちらで固定している。</p>
<p>実は ember-rails-todo-app 1.x では
<a href="https://github.com/mugijiru/ember-rails-todo-app/blob/21241d30fe4f9987760bd18bc2341b1943de26fe/Gemfile#L39-L42">jquery-rails や ember-source も指定している</a> けど多分わざわざ指定しないでいい気もする。</p>
<h3 id="config-dot-handlebars-dot-template-root">config.handlebars.template_root</h3>
<p>ember-rails ではこれで指定されているフォルダが Ember.js の Template として利用される。デフォルト設定だと <code>app/assets/javascriptes/templates</code> が指定されている。</p>
<p>複数の Ember.js App が動くようになってる場合には
config/application.js あたりで複数設定されているはず。</p>
<p>もし新しくテンプレートを放り込む場所を増やしたかったらここを弄る必要あり</p>
<h2 id="ember-dot-js-の基礎">Ember.js の基礎</h2>
<h3 id="emberobject">EmberObject</h3>
<p>Ember.js では EmberObject というものが全体的に使われている。</p>
<p>こいつは Ember.js で使う Class 的なやつのベースとなる機能を提供する。例えば Computed Property や Observer がそれにあたる。</p>
<p>以下では EmberObject のよく使う機能について
Vue.js の props, data, computed, watch, methods あたりと比較しながら解説する。</p>
<h4 id="通常のプロパティ">通常のプロパティ</h4>
<p>Vue.js における data にあたるもの。</p>
<p>EmberObject は、JS の Object でもあるので、普通に JS Object のプロパティとして定義したら Vue.js の data 的に扱える。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#a6e22e">Ember</span>.Object({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">200</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">height</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>参照したり更新したりする時は</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;width&#39;</span>) <span style="color:#75715e">// 参照
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;width&#39;</span>, <span style="color:#ae81ff">300</span>) <span style="color:#75715e">// 更新
</span></span></span></code></pre></div><p>のような書き方になります。正直だるい。</p>
<p>で、上で「Vue.js でいう data にあたるもの」と書いたが、
Vue.js でいう props と data 的な区別は特にないので、外から簡単に書き換えられる値でもある。</p>
<!--list-separator-->
<ul>
<li>
<p>3系では</p>
<p>3系だと EmberObject は使わなくなって JS の Native Class なので</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hoge</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>みたいな感じに書ける。</p>
<p>また Vue.js でいう props 的なのは
<code>this.args</code> の中に閉じ込められるし、値が変に上書きされることもない。便利。</p>
</li>
</ul>
<h4 id="computed-property">Computed Property</h4>
<p>Vue.js の Computed Property のように通常のプロパティから新しい値を導出してプロパティとして使えるようにするやつ。
Vue.js のそれと同様にキャッシュされるしリアルタイムに反映される。</p>
<p>書き方は Vue.js よりちょっとだるくて</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">fullName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Ember</span>.<span style="color:#a6e22e">computed</span>(<span style="color:#e6db74">&#39;firstName&#39;</span>, <span style="color:#e6db74">&#39;lastname&#39;</span>, <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;firstName&#39;</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;lastName&#39;</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>みたいな感じ。
Vue.js だと</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">computed</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fullName</span>() { <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">firstName</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastName</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>で済むのになって思うことはある。</p>
<p>ただ、別名でも取れるようにしたり(alias)とか、全部足したり(sum)とかのよくあるやつは関数が定義済なので a と b を足した c が欲しい場合は</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">c</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Ember</span>.<span style="color:#a6e22e">computed</span>.<span style="color:#a6e22e">sum</span>(<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>)
</span></span></code></pre></div><p>とか書けるのでそれは便利かもしれない。
<a href="https://api.emberjs.com/ember/2.18/modules/@ember%2Fobject#functions-computed">https://api.emberjs.com/ember/2.18/modules/@ember%2Fobject#functions-computed</a></p>
<!--list-separator-->
<ul>
<li>
<p>3系では</p>
<p>3.15 以降だと
<a href="https://guides.emberjs.com/release/upgrading/current-edition/tracked-properties/">Tracked Property</a> というのを使うのが推奨されている。まだ使えるけどね Computed も。</p>
<p>`@tracked` というデコレータが付与されたプロパティは値の変更が検知されるようになる。</p>
<p>また 3.15 以降では JS の Native Class になるので
Tracked Property と Getter を使って</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">tracked</span> <span style="color:#a6e22e">firstName</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">tracked</span> <span style="color:#a6e22e">lastName</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">get</span> <span style="color:#a6e22e">fullName</span>() { <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">firstName</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lastName</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> }
</span></span></code></pre></div><p>みたいに書ける。便利。</p>
</li>
</ul>
<h4 id="observer">Observer</h4>
<p>Vue.js の watch のようなやつ。値を監視して、変更があったら関数が実行されるやつ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">Ember</span>.<span style="color:#a6e22e">Observer</span>(<span style="color:#e6db74">&#39;hoge&#39;</span>, <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;&#34;hoge&#34; is changed!&#39;</span>)
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>みたいな感じで使う。</p>
<!--list-separator-->
<ul>
<li>
<p>3系では</p>
<p>Observer もまだ使えるけど、
Tracked Property を使ってなんとかするのが推奨されている。</p>
<p>上の例みたいにログだけ残したい時どうしたらいいんだろうね。</p>
</li>
</ul>
<h4 id="methods">Methods</h4>
<p>これは普通に関数を書けばいいだけ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">hoge</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// なんらかの処理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p><code>methods</code> とかいうところに書かなくていい分 Vue.js より楽ではという気もする。</p>
<h3 id="handlebars">Handlebars</h3>
<p>Ember.js で採用されているテンプレートエンジンです。変数の呼び出しに <code>{{foo}}</code> みたいな感じにするやつです。</p>
<p>Ember.js ではコンポーネントを呼び出す時にも
<code>{{my-component}}</code> みたいに使います。</p>
<p>上記の書き方はインラインコンポーネントの呼び出し方でブロックコンポーネントは</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hbs" data-lang="hbs"><span style="display:flex;"><span><span style="color:#75715e">{{</span><span style="color:#a6e22e">#my-block-component</span><span style="color:#75715e">}}</span>
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span><span style="color:#75715e">{{</span><span style="color:#a6e22e">/my-block-component</span><span style="color:#75715e">}}</span>
</span></span></code></pre></div><p>みたいな感じになります。</p>
<p>変数を渡す時は</p>
<p><code>{{my-component hoge=fuga}}</code></p>
<p>みたいな感じ。
Vue.js と比べて見た目以外はそんなに変わらないかなって。</p>
<h3 id="ember-dot-js-のフォルダ-ファイル構成">Ember.js のフォルダ・ファイル構成</h3>
<p>ここでは ember-rails を前提として話します。</p>
<table>
<thead>
<tr>
<th>フォルダ・ファイル</th>
<th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>adapters</td>
<td>サーバとの通信周りを設定するコードを置く場所</td>
</tr>
<tr>
<td>components</td>
<td>コンポーネント定義の JS ファイルを入れるところ</td>
</tr>
<tr>
<td>controllers</td>
<td>Rails でもお馴染みの Controller</td>
</tr>
<tr>
<td>initializers</td>
<td>初期化用コードを入れるところ</td>
</tr>
<tr>
<td>instance-initializers</td>
<td>アプリ起動直後の初期化コードを入れるところ</td>
</tr>
<tr>
<td>helpers</td>
<td>Rails でもお馴染みに Helper</td>
</tr>
<tr>
<td>mixins</td>
<td>Rails だと Concern にあたるものを置くところ</td>
</tr>
<tr>
<td>models</td>
<td>Rails でもお馴染みの Model</td>
</tr>
<tr>
<td>routes</td>
<td>Controller 実行前に Model などを取得したりするところ</td>
</tr>
<tr>
<td>routor.js</td>
<td>Routing を設定するところ。Vue.js の Router と似てるかも?</td>
</tr>
<tr>
<td>serializers</td>
<td>サーバと通信する前に形式変換するコードを置く場所</td>
</tr>
<tr>
<td>templates</td>
<td>Handlebars という HTML テンプレートを置く場所。Rails でいう views</td>
</tr>
<tr>
<td>views</td>
<td>使わない。Ember.js@1系の名残りかと</td>
</tr>
</tbody>
</table>
<h2 id="ember-dot-js-アプリにアクセスした時の処理の流れ">Ember.js アプリにアクセスした時の処理の流れ</h2>
<p>ざっくり書くと</p>
<ol>
<li>EMBER_ROOT/application.js.es6 のコード実行</li>
<li>EMBER_ROOT/{APP_NAME}.module.es6</li>
<li>initializer 実行</li>
<li>instance-initializer 実行</li>
<li>routor/routes の実行
<ol>
<li>beforeModel()</li>
<li>model()</li>
<li>afterModel()</li>
</ol>
</li>
<li>Controller の実行</li>
<li>templates のレンダリング</li>
</ol>
<p>という流れ。これは <a href="mailto:Ember.js@3.26">Ember.js@3.26</a> でも大体似てる。1,2 あたりがちょっと違うけど。</p>
<h3 id="ember-root-application-dot-js-dot-es6-のコード実行">EMBER_ROOT/application.js.es6 のコード実行</h3>
<p>単にこのあたりで色々なものを require したり
Ember.js App を呼び出したりしているのでここからスタートだよねってだけ。</p>
<p>Sprockets で require した順に実行されるので、以下の順序は大事っぽい。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">//= require ./environment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//= require ember
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//= require ember-data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//= require ember-rails/application
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//= require active-model-adapter
</span></span></span></code></pre></div><h3 id="ember-root-app-name-dot-module-dot-es6">EMBER_ROOT/{APP_NAME}.module.es6</h3>
<p>require でアプリケーション本体の色々なコードを読み込んだり設定を読み込んだりしている部分。</p>
<p>require される対象は Class みたいなものなのであまり読込順は関係なさそう。</p>
<p>module 化されてない場合は
<code>require router</code> と <code>require_self</code> は最後じゃないとまずそうだけども。</p>
<h3 id="initializer-実行">initializer 実行</h3>
<p>Ember.js App の起動時に実行される処理。</p>
<p>initializers フォルダに配置されていて</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">initializer</span>(<span style="color:#a6e22e">application</span>) {
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>みたいに書かれているファイルが実行される。アプリケーション初期化用のコード(ex: Websocket の初期化)とか
DI で組込みたい service の injection のコードを入れておくと良いっぽい。</p>
<p>initializer が複数ある場合の実行順はどうなってるかわからんけど
<a href="https://guides.emberjs.com/v2.18.0/applications/initializers/#toc%5Fspecifying-initializer-order">「これより先に」「これより後で」みたいな指定</a> はできる。</p>
<h3 id="instance-initializer-実行">instance-initializer 実行</h3>
<p>Ember.js App が起動直後に動く処理。</p>
<p>instance-initializers フォルダに配置されていて</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">instanceInitializer</span>(<span style="color:#a6e22e">application</span>) {
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>みたいに書かれているファイルが実行される。インスタンス化・起動後に動くので、
A/B テストみたいに見ている人毎に違う条件を埋め込むとかしたい時に使うのが良いらしい。</p>
<h3 id="routor-routes-の実行">routor/routes の実行</h3>
<p>初期化処理が済んだら routor が実行される。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">Router</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">route</span>(<span style="color:#e6db74">&#39;root&#39;</span>, { <span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/&#39;</span> })
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">route</span>(<span style="color:#e6db74">&#39;posts&#39;</span>, { <span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/posts&#39;</span> }, <span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">route</span>(<span style="color:#e6db74">&#39;new&#39;</span>)
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>みたいに書かれていて、
path にマッチした route が実行されるようになっている。
Vue Router なんかもそういう作りだよね。</p>
<p>Ember.js の Router は Vue Router とは違って直接コンポーネントが呼び出されるのではなく
routes 以下にある Route が呼び出されるようになっている。読まれるファイルは <code>this.route</code> の第一引数にマッチしたやつですね。</p>
<p>上の例では <code>/</code> というところにアクセスした場合には
<code>routes/root.module.es6</code> が実行されるという仕組み。</p>
<h4 id="beforemodel">beforeModel()</h4>
<p><code>model()</code> が実行されるより前に動く処理。ログイン状態チェックしてログインしてなければ別のルートに飛ばす、みたいに、あまりアプリケーションのModelと関係ない処理をする時に使えば良さそう。</p>
<p>正直あまり出番ない。</p>
<h4 id="model">model()</h4>
<p>その画面で使う Model を取得する処理。ここで return された値が Controller や Template で model としてアクセスできるようになる。</p>
<p>また Promise を返した場合は、それが解決された時の戻値を model として使えるようにしてくれる。</p>
<p>store.findAll などは Promise を返すが、
Promise の解決結果を Model とする挙動のおかげで</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">model</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">store</span>.<span style="color:#a6e22e">findAll</span>(<span style="color:#e6db74">&#39;posts&#39;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>とした場合に Controller などでは <code>this.get('model')</code> で <code>posts</code> が取得できるようになっている。</p>
<!--list-separator-->
<ul>
<li>
<p>複数の model</p>
<p>1画面で複数の Model を使いたい場合には</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">foo</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">hoge</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">bar</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">fuga</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>みたいに書けば良い。</p>
<p>Controller とかで <code>this.get('model.foo')</code> みたいにして扱える。</p>
</li>
</ul>
<h4 id="aftermodel--model">afterModel(model)</h4>
<p>model を取得した後で、画面を表示する前にやっておきたい処理を書くところ。第一引数で model が渡されてくるので、
model の状態を見て別の route に飛ばすとか、controller に値を放り込むとかの処理ができる。</p>
<h4 id="入れ子になった-route">入れ子になった Route</h4>
<p>上の例にも書いたけど Route はネストさせることもできる。</p>
<p>例えば <code>/posts/new</code> という route の場合は画面表示的には <code>/posts</code> というレイアウトの中に登録フォームを表示する、みたいな時に使う</p>
<p>このあたりは <a href="https://router.vuejs.org/ja/guide/essentials/nested-routes.html">Vue Router の Nested Route</a> と似てるよね。どっちが先か知らんけど。</p>
<p>で、そうやってネストさせている場合は、一番外側の Route から順に実行されるような感じになっている。</p>
<p>つまり上記の例だと <code>posts.module.es6</code> の <code>model()</code> なんかが実行された後に
<code>/posts/new.module.es6</code> の内容が実行される。</p>
<p>上位の path の route が既に実行されているので下位の path で上位の model 情報を使いたい場合、上記の例だと <code>/posts/new</code> で <code>posts</code> の model 情報を使いたい場合には
<a href="https://api.emberjs.com/ember/3.26/classes/Route/methods/modelFor?anchor=modelFor">modelFor()</a> という関数で <code>const posts = modelFor('posts')</code> みたいに取得できる。</p>
<h3 id="controller-の実行">Controller の実行</h3>
<p>Route での処理が済んだら Controller の処理が実行される。というか Route から <a href="https://api.emberjs.com/ember/release/classes/Route/methods/setupController?anchor=setupController">setupController</a> というので呼び出される。</p>
<p>呼び出される Controller は route と同じように path にマッチしたやつになる。つまり <code>/posts</code> という path なら
<code>controllers/posts.module.es6</code> で定義している Controller が呼び出される。</p>
<p>Controller では Template で使う値を設定したり Action を定義したりする。</p>
<h3 id="template-のレンダリング">Template のレンダリング</h3>
<p>Controller の処理が済んだら Template のレンダリングに入る。呼び出される Template は Controller の path と一致する。</p>
<p>つまり <code>/posts</code> という path なら <code>templates/posts.hbs</code> が呼び出される。</p>
<p>Template は Handlebars 形式で記述する。</p>
<h2 id="ember-dot-js-の-component">Ember.js の Component</h2>
<p>Ember.js の開発で一番弄る機会の多いのが Component です。</p>
<p>components フォルダに JS のロジックが書かれたファイルが置かれ、対応するテンプレートは、
templates/components フォルダに Handlebars で記述した hbs ファイルとなる。</p>
<p>JS のロジックが書かれる Component は <a href="#emberobject">EmberObject</a> がベースなのでそれらの機能が使える。さらに Component 用の機能が追加されている。</p>
<h3 id="値の渡し方">値の渡し方</h3>
<p><a href="#handlebars">Handlebars</a> の方でも書いたけど
<code>{{my-component hoge=fuga}}</code> というように書けば良いです。</p>
<p>そうすると MyComponent 内で
<code>this.get('hoge')</code> で値が取得できるようになり、そのテンプレート内で <code>{{hoge}}</code> で参照できるようになります。</p>
<h3 id="component-のタグのカスタマイズ">Component のタグのカスタマイズ</h3>
<p>古い Ember.js では Component を呼び出すと
Wrapper となる div が挿入されてその中に Template で書いた記述が入るようになっています。</p>
<h4 id="tagname">tagName</h4>
<p>Wrapper のタグを指定する。
ul の下にリストアイテムをコンポーネントとして配置したい時は
<code>tagName: 'li'</code> とかやったりする。</p>
<h4 id="classnames">classNames</h4>
<p>Wrapper タグに付与する class のリスト。こちらは固定の値になる。</p>
<h4 id="classnamebindings">classNameBindings</h4>
<p>Wrapper タグに、条件に応じて付与する class のリスト的な。
Vue.js の class の Binding に似ていて</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">isActive</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">classNameBindings</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;isActive:active&#39;</span>]
</span></span></code></pre></div><p>みたいに書くと isActive が true の時に `active` というクラスが付与される。</p>
<p>Vue.js だと</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{ active: isActive }&#34;</span>&gt;
</span></span></code></pre></div><p>となるので書き方が逆だけどね。</p>
<h4 id="3系では">3系では</h4>
<p>3.15 以降では Vue のコンポーネント同様に余計な Wrapper が入らなくなります。なので tagName, classNames, classNameBindings とは全ておさらばとなります。</p>
<h3 id="actions">Actions</h3>
<p>テンプレート内のボタンを叩いた時に動かしたい関数なんかを記述するところ。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">actions</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">hoge</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// なんか処理を書く
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>みたいな感じで書く。</p>
<h4 id="template-で直接使う場合">Template で直接使う場合</h4>
<p>Template から直接アクションを呼びたい時は</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hbs" data-lang="hbs"><span style="display:flex;"><span>&lt;button type=&#34;}button&#34; <span style="color:#75715e">{{</span>action <span style="color:#e6db74">&#34;hoge&#34;</span><span style="color:#75715e">}}</span>&gt;
</span></span></code></pre></div><p>みたいに書くと、そのボタンを押した時に hoge アクションが動く。
<a href="https://guides.emberjs.com/v2.18.0/components/triggering-changes-with-actions/#toc%5Fdesigning-the-child-component">https://guides.emberjs.com/v2.18.0/components/triggering-changes-with-actions/#toc%5Fdesigning-the-child-component</a></p>
<h4 id="下位のコンポーネントに渡す場合">下位のコンポーネントに渡す場合</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hbs" data-lang="hbs"><span style="display:flex;"><span><span style="color:#75715e">{{</span>child-component <span style="color:#a6e22e">foo</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">(</span>action <span style="color:#e6db74">&#34;hoge&#34;</span><span style="color:#960050;background-color:#1e0010">)</span><span style="color:#75715e">}}</span>
</span></span></code></pre></div><p>というように書いて渡すと、child-component では
foo というメソッドが定義されていて、その実体は親コンポーネントで定義した hoge アクション、という状態になる</p>
<p>なので child-component 内のアクションを</p>
<pre tabindex="0"><code class="language-nil" data-lang="nil">actions: {
  fuga() {
    this.get(&#39;foo&#39;)()
  }
}
</code></pre><p>というように書いて child-component のテンプレートで fuga アクションを実行したら親コンポーネントの hoge アクションが実行される、みたいな挙動になる</p>
<p>参考: <a href="https://guides.emberjs.com/v2.18.0/components/triggering-changes-with-actions/#toc%5Fpassing-the-action-to-the-component">https://guides.emberjs.com/v2.18.0/components/triggering-changes-with-actions/#toc%5Fpassing-the-action-to-the-component</a></p>
<h3 id="lifecycle-hooks">LifeCycle Hooks</h3>
<p><a href="https://guides.emberjs.com/v2.18.0/components/the-component-lifecycle/">なんかめっちゃ Hook が用意されている。</a></p>
<h4 id="初期化時">初期化時</h4>
<ol>
<li>init</li>
<li>didReceiveAttrs</li>
<li>willRender</li>
<li>didInsertElement</li>
<li>didRender</li>
</ol>
<p>init と didRender あたりは割と使うかな?
didRender は再描画でも使うので両方に適用したい時に使う感じ。</p>
<p>didInsertElement もたまに使う気がする。</p>
<h4 id="再描画時">再描画時</h4>
<ol>
<li>didUpdateAttrs</li>
<li>didReceiveAttrs</li>
<li>willUpdate</li>
<li>willRender</li>
<li>didUpdate</li>
<li>didRender</li>
</ol>
<p>didRender は割と使う。
didUpdate は初期化時には動かしたくないけど didRender 的に使いたい時に使う感じ。他はあまり使った記憶なし。</p>
<h4 id="破壊時">破壊時</h4>
<ol>
<li>willDestroyElement</li>
<li>willClearRender</li>
<li>disDestroyElement</li>
</ol>
<p>このあたりはあまり使った記憶がない</p>
<h4 id="hook-の使い方">Hook の使い方</h4>
<p>使い方は2種類あって</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">init</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_super</span>(...<span style="color:#a6e22e">arguments</span>) <span style="color:#75715e">// 通常の処理をさせておく
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// ここに特別な処理を書く
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>というように hook 関数を Override する方法と</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">hoge</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Ember</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;init&#39;</span>, <span style="color:#a6e22e">functoin</span> () {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ここに特別な処理を書く
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>})
</span></span></code></pre></div><p>というように <a href="https://api.emberjs.com/ember/2.18/functions/@ember%2Fobject%2Fevented/on">on メソッド</a> を使う方法がある。</p>
<p>Rails の Model で</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>after_save <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># ここに特別な処理を書く</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>と書くか</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>after_save <span style="color:#e6db74">:hoge</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">hoge</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># ここに特別な処理を書く</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>と書くかの違いみたいなものですね。</p>
<p>私は後者の方が好み。間違えて二重定義したりしなさそうだし <code>this._super(...arguments)</code> を呼び忘れもしなさそうなので。</p>
<p>まあ前者の方が <code>this._super</code> の呼び出しタイミングをズラせる自由さはあるけどね。</p>
<h3 id="block-component">Block Component</h3>
<p><a href="https://guides.emberjs.com/v2.18.0/components/block-params/">Block Component</a> では</p>
<p>my-component のテンプレートを</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hbs" data-lang="hbs"><span style="display:flex;"><span>&lt;div&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">{{</span>yield<span style="color:#75715e">}}</span>
</span></span><span style="display:flex;"><span>  ↑親から来たやつ↑
</span></span><span style="display:flex;"><span>&lt;/div&gt;
</span></span></code></pre></div><p>みたいに書いてる状態で親から</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-hbs" data-lang="hbs"><span style="display:flex;"><span><span style="color:#75715e">{{</span><span style="color:#a6e22e">#my-component</span><span style="color:#75715e">}}</span>
</span></span><span style="display:flex;"><span>  hogehoge
</span></span><span style="display:flex;"><span><span style="color:#75715e">{{</span><span style="color:#a6e22e">/my-component</span><span style="color:#75715e">}}</span>
</span></span></code></pre></div><p>みたいに呼び出すと</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  hogehoge
</span></span><span style="display:flex;"><span>  ↑親から来たやつ↑
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>という感じになるやつ。</p>
<p>Rails のテンプレートの yield と似てる気がするよね。あと Vue.js の slot にも似てる気がするよね。複数 Slot みたいなことはできなさそうだけども。</p>
<p>本当はもうちょっと複雑なこともできるんだけど入門記事だしそこまで書くのはだるいので割愛。というか <a href="#block-component">Block Component</a> のリンク先読んで。</p>
<h3 id="フォルダ階層分け">フォルダ階層分け</h3>
<p>最新の Ember.js だと素直にいけるのに ember-rails かつ古い書き方だと苦労する問題の1つ。</p>
<p><a href="/posts/ember-rails-component-in-subfolder/">ember-rails でコンポーネントをサブフォルダに配置する</a> に全部書いているけどざっくり書くと
template で <code>{{hoge/fuga}}</code> というように呼び出した場合に
GlobalResolver では Hoge という名前空間の Fuga というコンポーネントを探しに行くようになっている。</p>
<p>つまりコンポーネントを
<code>App.HogeFugaComponent</code> ではなく
<code>Hoge.FugaComponent</code> として定義する必要がある。そして名前空間 Hoge を <code>window.Hoge = Ember.Namespace.create()</code> みたいにして用意しておく必要もある。だるい。</p>
<p>試したことはないけど、さらに1階層増やすとしたら、また同じようにすることになりそうでさらにだるそう。</p>
<h3 id="3系でのテンプレートの配置">3系でのテンプレートの配置</h3>
<p>3.15 以降では components に hbs を置けるようになるよ。
JS ファイルと場所が近くて便利。</p>
<p>さらに <a href="https://cli.emberjs.com/release/advanced-use/project-layouts/#podslayout">Pods layout</a> という構成が使えて機能群毎にまとめるのが便利になる。</p>
<p>Pods layout はコンポーネントだけではなくて
model, controller とかの構成もフォルダに閉じ込められるので多分便利。まだ試したことないけど。</p>
<h2 id="model--ember-data">Model(Ember Data)</h2>
<p>大体 Route で Controller にセットされる子。
Rails の Model に似せて作られている。</p>
<p><a href="#emberobject">EmberObject</a> ベースで作られているので、当然そのあたりの機能も使える。
computed とかね。</p>
<h3 id="store-の操作">Store の操作</h3>
<p>データを取得したりまとめて消したりする際に使う。
Rails でいうと ActiveRecord モデルの Class Method を叩く感じ。</p>
<p>参考: <a href="https://api.emberjs.com/ember-data/2.18/classes/DS.Store">https://api.emberjs.com/ember-data/2.18/classes/DS.Store</a></p>
<p>以下ではよく使うものをピックアップして簡単な説明をしています。</p>
<h4 id="findall-peekall">findAll/peekAll</h4>
<p>どちらも対象のレコードを全件取得するメソッド。</p>
<p>違いは peekAll の方はフロントエンドの Store 内の検索に留まり、
findAll はデータがなければサーバにまで取りに行く。</p>
<p><code>store.findAll('user')</code> みたいに使う。</p>
<h4 id="findrecord-peekrecord">findRecord/peekRecord</h4>
<p>findAll/peekAll のレコード単体版。違いも同じ。</p>
<p><code>store.findRecord('user', 1)</code> とすると
id が 1 の User を探しに行く。</p>
<h4 id="query-queryrecord">query/queryRecord</h4>
<p>findAll ではクエリパラメータを付けられないので検索画面などは作れない。そんな場合は query を使うとパラメータを付与してリクエストを投げられる。それの単体レコード版が queryRecord となる。</p>
<h4 id="create">create</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">store</span>.<span style="color:#a6e22e">create</span>(<span style="color:#e6db74">&#39;user&#39;</span>, { <span style="color:#a6e22e">firstName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Taro&#39;</span>, <span style="color:#a6e22e">lastName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Yamada&#39;</span> })
</span></span></code></pre></div><p>みたいな感じでデータを作成できる。</p>
<h4 id="push-pushpayload">push/pushPayload</h4>
<p>push は Object から Store にレコードを作る処理。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">store</span>.<span style="color:#a6e22e">push</span>({
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;user&#34;</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;first_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Taro&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;last_name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Yamada&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>とかやるとレコードが Store 上に作られる。無理矢理サーバから持って来たデータを Store に突っ込む時に使う。</p>
<p>pushPayload はそれの便利版で</p>
<pre tabindex="0"><code class="language-nil" data-lang="nil">{
  &#34;users&#34;: [{
    &#34;id&#34;: 1,
    &#34;first_name&#34;: &#34;Taro&#34;,
    &#34;last_name&#34;: &#34;Yamada&#34;
  }],
  &#34;posts&#34;: [{
    &#34;id&#34;: 1,
    &#34;title&#34;: &#34;Awesome Blog Post&#34;,
    &#34;body&#34;: &#34;...&#34;
  }]
}
</code></pre><p>みたいなのを受け取ると users と posts をそれぞれ複数レコード登録してくれる。</p>
<!--list-separator-->
<ul>
<li>
<p>注意</p>
<p>push/pushPayload の例で書いている JSON は ember-rails で使う active-model-adapter 前提で書いています。デフォルトだと JSON:API 形式を受け付けるようになっています。</p>
</li>
</ul>
<h3 id="model-の操作">Model の操作</h3>
<p>peekRecord などで取得した Model に対しての操作。更新したり削除したりはこれで行う。</p>
<p>参考: <a href="https://api.emberjs.com/ember-data/2.18/classes/DS.Model">https://api.emberjs.com/ember-data/2.18/classes/DS.Model</a></p>
<p>以下ではよく使うものをピックアップして簡単な説明をしています。</p>
<h4 id="save">save</h4>
<p>取得したデータは set で値を書き換えて save で保存できる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">store</span>.<span style="color:#a6e22e">findRecord</span>(<span style="color:#e6db74">&#39;user&#39;</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;firstName&#39;</span>, <span style="color:#e6db74">&#39;Taro&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">save</span>()
</span></span></code></pre></div><p>save は Promise を返すので、保存後に何か処理をしたければ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">save</span>().<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">savedUser</span>) =&gt; { <span style="color:#75715e">/* 保存成功時の処理 */</span> }, (<span style="color:#a6e22e">error</span>) =&gt; { <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">error</span>) })
</span></span></code></pre></div><p>みたいなことができる。</p>
<h4 id="destroyrecord">destroyRecord</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">store</span>.<span style="color:#a6e22e">findRecord</span>(<span style="color:#e6db74">&#39;user&#39;</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">destroyRecord</span>()
</span></span></code></pre></div><p>みたいな感じで削除できる。</p>
<p>save と同様に callback も受け付けている。</p>
<h4 id="unloadrecord">unloadRecord</h4>
<p>unloadRecord はサーバの実データは消しに行かずフロントエンドの Store から捨てるだけ。</p>
<h4 id="reload">reload</h4>
<p>サーバからデータを読み直す。</p>
<h3 id="model-の定義">Model の定義</h3>
<h4 id="attr">attr</h4>
<p><code>firstName: DS.attr()</code> みたいに定義するやつ。
API から取って来た値をそのまま放り込む感じである。</p>
<h4 id="belongsto">belongsTo</h4>
<p><code>user: DS.belongsTo('user')</code>
って書いたら <code>this.get('user')</code> と指定した時に userId から適切なデータを探してくる感じ。
Rails と似てますね。</p>
<p><code>user: DS.belongsTo('user', { async: false })</code>
としておけばサーバには探しに行かなくなるっぽい。対応するエンドポイントを用意してない時なんかはそうしておいた方が良い。</p>
<h4 id="hasmany">hasMany</h4>
<p><code>posts: DS.hasMany('posts')</code>
って書いたら関連する posts を <code>this.get('posts')</code> で取ってこれるようになる。
Rails と似てますね。</p>
<p><code>posts: DS.hasMany('posts, { async: false })</code>
としておけばサーバには探しに行かなくなる。
hasMany の関連先のレコードが多い時なんかはまとめて取らない方がいいのでこの方が便利。</p>
<p>その場合、別で取得する方法を考えた方が良い。</p>
<h4 id="3系では">3系では</h4>
<ul>
<li><code>@attr firstName</code></li>
<li><code>@belongsTo('user') user</code></li>
<li><code>@hasMany('post') posts</code></li>
</ul>
<p>みたいにデコレータで定義する。
option の async などをつける場合は <code>@belongsTo('user', { async: false }) user</code> みたいな感じ。</p>
<h2 id="adapter-serializer">Adapter/Serializer</h2>
<p>どっちも普段あまり触らないところなので簡単に。</p>
<p>Adapter がサーバへのアクセス方法を色々設定するところ。どのホストにアクセスするかとか、どの PATH にアクセスするかとか
HTTP Header で何か渡すならそれを設定するとか。</p>
<p>Serializer がデータ形式を変換するところ。
JS 側では camelCase のキーを、サーバに渡す時には dashlize したり逆に dashlize されてるキーを貰う時は camelize したり。</p>
<h2 id="controller">Controller</h2>
<p>Rails の Controller とは結構違う役割の子。
Rails ベースで考えると混乱する。</p>
<p>Route と関連する特別な Component みたいな扱いなので
Component の扱いをベースに触った方が良い。</p>
<p>Component に近い立場なので各種 hook だったり actions だったりが使える。</p>
<p>tagName や className などは使えるか調べたこともないのでわからない。</p>
<p>コンポーネントツリーの根っこの Component みたいな感じなので大分カオスになりがちなやつ。</p>
<p>正直そのカオスをどう解消したらいいかまだ分かってないが、恐らくここではページ全体に関するロジックだけを詰めておき、
Component に直接 Service Object を Inject して、その Service Object にロジックを詰めておいた方が良いんじゃないかなと考えている。どこかで試してみたい。</p>
<h2 id="service-object">Service Object</h2>
<p>各 Component や Controller に Inject して使う便利な Object です。
Vue.js でいうと Vuex ぐらいどこでも使えて便利。つまり無闇にあちらこちらに Inject するとそれはそれでカオスになる系。</p>
<p>アプリケーション全体で使うような、例えば EC サイトだと shopping-cart を Service で実装しておいて各 Component で Inject する、みたいな感じで使う。</p>
<h2 id="色々な罠達">色々な罠達</h2>
<h3 id="ember-dot-js-の-guide">Ember.js の Guide</h3>
<p>ember-rails だと <a href="mailto:Ember.js@2.18">Ember.js@2.18</a> までなので
<a href="https://guides.emberjs.com/v2.18.0/">https://guides.emberjs.com/v2.18.0/</a>
などの古いバージョンのガイド読みましょう。</p>
<p>っていうか古いバージョンのも全部残っててありがたいよね。</p>
<p>ただ ember-rails でも古い書き方をしていると
import とか使えないのでそのあたりは読みにくいと思う。
import とかを使ってないのは 1.10 ぐらいの書き方だから……。</p>
<h3 id="active-model-serializers-という-gem-の-0-dot-10-系で動きません">active_model_serializers という Gem の 0.10 系で動きません&gt;&lt;</h3>
<p>ember-rails では active_model_adapter というのを Ember.js 側で使っています。そしてそれに適合する active_model_serializers gem は 0.9系となっています。というわけで 0.9 系を使いましょう。</p>
<h3 id="コンポーネント呼び出し階層が深いので-controller-の-action-を叩くのがしんどいです">コンポーネント呼び出し階層が深いので Controller の Action を叩くのがしんどいです</h3>
<p>その Action を Controller じゃなくて Service に移動して
Component に Service を Inject して使うようにしたら良いかもしれません。</p>
<p>Vue.js でいうと Vuex をあちらこちらから叩くとカオスになるように、
Service の Inject もやりすぎるとそれはそれでカオスになりそう。</p>
<h3 id="mixins-に色々置いて共通化ウェーイ">mixins に色々置いて共通化ウェーイ</h3>
<p>それあなた Rails でも Concerns に置いて後々苦労したりしませんでしたか?
あんまり Mixin に頼るとつらいので Service に逃がすなど検討しましょう</p>
<h3 id="ember-コマンドを使いたい">ember コマンドを使いたい</h3>
<p>ember-cli-rails に乗り換えましょう。
<a href="/posts/migrate-ember-rails-to-ember-cli-rails/">ember-rails から ember-cli-rails へ</a> でその方法書いてるので参考にどうぞ。</p>
<h3 id="addon-を入れたい-便利そう">Addon を入れたい! 便利そう!</h3>
<p>ember-rails では無理です。
ember-cli-rails に乗り換えましょう。</p>
<h3 id="webpack-使えないの">Webpack 使えないの?</h3>
<p>ember-rails なら諦めましょう。そうじゃない場合も諦めた方がいいです。</p>
<p><a href="https://github.com/embroider-build/embroider">Embroider</a> というプロジェクトで Webpack とか Rollup とかと連携できるように頑張ってるみたいですがまだ v1 がリリースされてないのでプロダクションで使うには罠がまだまだ多そうです。</p>
<h3 id="ember-dot-js-の単体テストを書きたい">Ember.js の単体テストを書きたい……!</h3>
<p>ember-rails でしたら諦めてください。</p>
<p>ember-cli なら QUnit または Mocha あたりでテストが書けるので
ember-cli-rails に乗り換えましょう。</p>
<p>Ember.js 自体に黒魔術が多いようで Jest ではテストが書けませんので Jest 派はお疲れ様でした</p>
<h3 id="css-も-ember-dot-js-内で書きたい">CSS も Ember.js 内で書きたい!</h3>
<p>ember-rails なら諦めて <code>RAILS_ROOT/app/assets/stylesheets</code> あたりで書きましょう。おつかれさまでした。</p>
<p>ember-cli を使っていたら <code>EMBER_ROOT/app/styles/</code> 以下に置けるらしいよ。
<a href="https://cli.emberjs.com/release/advanced-use/stylesheets/">https://cli.emberjs.com/release/advanced-use/stylesheets/</a></p>
<h3 id="resolver-のソースってどれ">Resolver のソースってどれ?</h3>
<p>ember-rails をお使いで、かつ古い書き方をしているみなさんは
ember-source の中にある GlobalResolver をお読み下さい。以上。</p>
<p>ember-cli で Ember.js アプリを構築している先進的な皆様は
Ember.js の中にある GlobalResolver ではなくて ember-resolver という Addon を見ましょう。ただそいつはそいつで GlobalResolver を継承しているので結局 GlobalResolver のソースも読まないといけないという罠がある。</p>
<p>まあ v4 あたりでは継承やめるって話あるけどね</p>
<h2 id="最後に">最後に</h2>
<p>ember-rails のまま保守し続けるよりは
ember-cli-rails に移行して3系にした方が幸せになれそうなので是非ご検討ください。</p>
<p>そのあたりの対応方法は、私が書いた記事ですが、</p>
<ul>
<li><a href="/posts/migrate-ember-rails-to-ember-cli-rails/">ember-rails から ember-cli-rails へ</a></li>
<li><a href="/posts/update-emberjs-2.18to3/">ember-cli-rails の Ember.js を 2.18 から 3.4 にアップデート</a></li>
<li><a href="/posts/update-emberjs-3_4-to-latest/">Ember.js@3.4 から最新の 3.26 に上げた</a></li>
</ul>
<p>あたりが参考になるかもです。</p>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://mugijiru.github.io/categories/rails/">Rails</a></span>
        <span class="tag"><a href="https://mugijiru.github.io/categories/ember-js/">Ember-js</a></span>
        
    </p>


      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        8448 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2021年05月24日 09:02
        

        
          
        
      </p>
    </div>
      <hr />
      <div class="sharing-buttons">
        
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_blank" rel="noopener" aria-label="" title="Share on facebook">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_blank" rel="noopener" aria-label="" title="Share on twitter">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
      <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80&amp;caption=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80&amp;canonicalUrl=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_blank" rel="noopener" aria-label="" title="Share on tumblr">
  <div class="resp-sharing-button resp-sharing-button--tumblr resp-sharing-button--small">
    <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.563 24c-5.093 0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941 0 9.999 0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="mailto:?subject=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80&amp;body=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_self" rel="noopener" aria-label="" title="Share via email">
  <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f&amp;media=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f;description=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80" target="_blank" rel="noopener" aria-label="" title="Share on pinterest">
  <div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.162-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.401.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.354-.629-2.758-1.379l-.749 2.848c-.269 1.045-1.004 2.352-1.498 3.146 1.123.345 2.306.535 3.55.535 6.607 0 11.985-5.365 11.985-11.987C23.97 5.39 18.592.026 11.985.026L12.017 0z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f&amp;title=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80&amp;summary=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80&amp;source=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_blank" rel="noopener" aria-label="" title="Share on linkedin">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f&amp;resubmit=true&amp;title=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80" target="_blank" rel="noopener" aria-label="" title="Share on reddit">
  <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://www.xing.com/app/user?op=share;url=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f;title=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80" target="_blank" rel="noopener" aria-label="" title="Share on xing">
  <div class="resp-sharing-button resp-sharing-button--xing resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="whatsapp://send?text=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80%20https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_blank" rel="noopener" aria-label="" title="Share on whatsapp">
  <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f&amp;t=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80" target="_blank" rel="noopener" aria-label="" title="Share on hacker news">
  <div class="resp-sharing-button resp-sharing-button--hackernews resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://telegram.me/share/url?text=ember-rails%20%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e4%bf%9d%e5%ae%88%e5%85%a5%e9%96%80&amp;url=https%3a%2f%2fmugijiru.github.io%2fposts%2fember-rails-introduction%2f" target="_blank" rel="noopener" aria-label="" title="Share on telegram">
  <div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
    </div>
  </div>
</a>

      </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h"></span>
          <hr />
        </div>

        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://mugijiru.github.io/posts/hugo-build-in-github-actions/">
                <span class="button__icon">←</span>
                <span class="button__text">Hugo の build を GitHub Actions でやることにした</span>
              </a>
            </span>
          

          
            <span class="button next">
              <a href="https://mugijiru.github.io/posts/update-emberjs-3_4-to-latest/">
                <span class="button__text">Ember.js@3.4 から最新の 3.26 に上げた</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    <div class="entry__adsense-unit">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2857297565325683"
         crossorigin="anonymous"></script>
    <ins class="adsbygoogle"
         style="display:block; text-align:center;"
         data-ad-layout="in-article"
         data-ad-format="fluid"
         data-ad-client="ca-pub-2857297565325683"
         data-ad-slot="7068570418"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>


    

  </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2024</span>
            
            
            <span><a href="https://mugijiru.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    
    <div class="footer__inner">
        <div class="footer__content">
          <span>Powered by <a href="http://gohugo.io">Hugo</a></span><span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
    
    <div class="footer__inner">
        <div class="footer__content">
            <span><a href="/privacy_policy">Privacy Policy</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.85fad2de4f13fec3bcb3b3cb10430cdb44a7b4a9749b32938241a5c6e77718df7624f1002b880521fdc26e24ec1077fda214bf1cb36ee3045510760d09638cae.js" integrity="sha512-hfrS3k8T/sO8s7PLEEMM20SntKl0mzKTgkGlxud3GN92JPEAK4gFIf3CbiTsEHf9ohS/HLNu4wRVEHYNCWOMrg=="></script>



    </body>
</html>
