<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on 麦汁三昧</title>
        <link>https://mugijiru.github.io/posts/</link>
        <description>Recent content in Posts on 麦汁三昧</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>ja-JP</language>
        <lastBuildDate>Sun, 21 Feb 2021 15:40:00 +0900</lastBuildDate>
        <atom:link href="https://mugijiru.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>ember-rails で書いた Web アプリを GitHub で公開した</title>
            <link>https://mugijiru.github.io/posts/publish-ember-rails-app/</link>
            <pubDate>Sun, 21 Feb 2021 15:40:00 +0900</pubDate>
            
            <guid>https://mugijiru.github.io/posts/publish-ember-rails-app/</guid>
            <description>この間の記事 で書いたように ember-rails で簡単なアプリケーションを作ってた。よくある TODO アプリである。 先週時点では「テストとかなくてもいいから動けばいいだ</description>
            <content type="html"><![CDATA[<p><a href="/posts/ember-rails-in-2021/">この間の記事</a> で書いたように
ember-rails で簡単なアプリケーションを作ってた。よくある TODO アプリである。</p>
<figure>
    <img src="/ox-hugo/screenshot-ember-rails-todo-app.png"/> 
</figure>

<p>先週時点では「テストとかなくてもいいから動けばいいだろ」って気持ちだったけどなんとなーくテストを追加したくなったりあんまり慣れてない docker-compose 対応してみたりしていたのと平日はこのプログラムに触れてなかったので、結構日が空いてしまった。</p>
<p>まあ、それはともかくとして、とりあえず <a href="https://github.com/mugijiru/ember-rails-todo-app/">https://github.com/mugijiru/ember-rails-todo-app/</a> に置いておいた現時点の最新コミットで <a href="https://github.com/mugijiru/ember-rails-todo-app/tree/v1.1.1">v1.1.1</a> のタグを振ってるやつは自分の知ってる一番古いスタイルで書かれてる状態にしてある。</p>
<h2 id="使ってる-gem">使ってる Gem</h2>
<ul>
<li>Ember.js 関係
<ul>
<li>ember-rails</li>
<li>ember-source</li>
<li>jquery-rails
<ul>
<li>Ember.js は 2 系まで jquery に依存しているので
<ul>
<li>よく見ると ember-rails の依存に入ってるから書かなくて良かったな……</li>
</ul>
</li>
</ul>
</li>
<li>active_model_serializers 0.9
<ul>
<li>0.9 系じゃないとうまく動かないっぽい</li>
</ul>
</li>
</ul>
</li>
<li>CSS framework
<ul>
<li>bootstrap-sass
<ul>
<li>レガシー感の演出のため敢えてこれにしている</li>
</ul>
</li>
</ul>
</li>
<li>テスト関係
<ul>
<li>rspec-rails</li>
<li>factory_bot_rails</li>
<li>database_rewinder</li>
<li>capybara</li>
<li>selenium-webdriver</li>
</ul>
</li>
</ul>
<p>あたり。</p>
<h2 id="レガシー感の演出">レガシー感の演出</h2>
<p>レガシー感を出すために bootstrap-sass(Bootstrap3系になる)を使ったりはしているがあまり特別なものは使ってない。</p>
<p>また ember-rails で ember アプリのソースコードを generate すると
es6 module を使ったようなコードが出力されるけど、これも敢えてレガシー感を出すために module を使わない形式に書き直している。</p>
<p>よりレガシー感を出すために CoffeeScript にするという手もあったけど、さすがにそこまでは頑張りたくないw
もう何年も触ってないよ CoffeeScript&hellip;</p>
<p>そしてページ全体を Ember.js にはしないでページの一部を Ember.js にする <a href="https://guides.emberjs.com/v2.18.0/configuring-ember/embedding-applications/">埋め込み</a> 形式を採用している。既存のアプリに Ember.js を後乗せした感の演出である。実際、構築時には一時的に普通の Rails App として動くようにしていた。</p>
<p>他にこだわったところは、今回は単一のアプリケーションしか動かしてないけど
<a href="https://github.com/emberjs/ember-rails#multiple-ember-application">Multiple Ember Application</a>
の作法に則って、Ember アプリケーションを追加で乗せられるようにしている。これにより「この画面も Ember 化しようず」という流れで
Ember アプリが複数動いてる状態により近くなったんじゃないかなと。実際今回動いてるのは1つだから、ちょっと違うけどね。。。</p>
<h2 id="最後に">最後に</h2>
<p>ここから段々と最新の Ember.js を使えるように寄せていくつもり。</p>
]]></content>
        </item>
        
        <item>
            <title>2021年にもなって ember-rails で新規アプリを書いてみてる</title>
            <link>https://mugijiru.github.io/posts/ember-rails-in-2021/</link>
            <pubDate>Sat, 13 Feb 2021 01:15:00 +0900</pubDate>
            
            <guid>https://mugijiru.github.io/posts/ember-rails-in-2021/</guid>
            <description>少し思うところがあって、 2021 年になったというのに ember-rails を使って新規で Web アプリを書いている。 ember-rails とは? ember-rails は Ember.js という Web フロントエンド MVC なフレームワークを</description>
            <content type="html"><![CDATA[<p>少し思うところがあって、
2021 年になったというのに <a href="https://github.com/emberjs/ember-rails">ember-rails</a> を使って新規で Web アプリを書いている。</p>
<h2 id="ember-rails-とは">ember-rails とは?</h2>
<p>ember-rails は
Ember.js という Web フロントエンド MVC なフレームワークを
Rails といい感じに連携してくれて快適な Web アプリケーション開発体験を提供してくれるものであった。</p>
<p>過去形なのは、ember-rails は Rails3 とか 4 とかの時代に主に使われていて既にメンテナンスされてないのと、今はそれよりも良い <a href="https://github.com/thoughtbot/ember-cli-rails">ember-cli-rails</a> というのがあるから。</p>
<h2 id="今-ember-rails-を使うと何がつらいか">今 ember-rails を使うと何がつらいか</h2>
<p>色々つらい。</p>
<h3 id="まずメンテナンスが止まってる">まずメンテナンスが止まってる</h3>
<p>なので Rails 6 で動くかがわからない。多分、試している人はいないし、自分もそこまで試す気力はない。</p>
<h3 id="ember-dot-js-のサポートが-2-dot-18-dot-2-までとなっている">Ember.js のサポートが 2.18.2 までとなっている。</h3>
<p>より詳細に話すと
ember-rails が依存している Gem である ember-source で本当は 3.0.0.beta.2 まで出てるんだけど、β版のことは無視する。
<a href="https://rubygems.org/gems/ember-source/versions/2.18.2">https://rubygems.org/gems/ember-source/versions/2.18.2</a></p>
<p>で、その 2.18.2 は既にサポートされてないバージョンである。</p>
<p>サポートされてないバージョンを使うのはセキュリティ面でもまずいしもはや情報もあまり落ちてないので苦行である。</p>
<p>Ember.js 公式サイトのドキュメントが過去のバージョンのものも残されているのでそれを頼りにするしかない。というか公式で残しててくれてありがとう。それがないと何もできないよ。</p>
<h3 id="ember-rails-だと-ember-dot-js-の-addon-が導入できない">ember-rails だと Ember.js の addon が導入できない</h3>
<p>例えば Handlebars でロジックを書く上でとても基本的な比較用のヘルパーを提供してくれる <a href="https://github.com/jmurphyau/ember-truth-helpers">ember-truth-helper</a> が使えない。これが使えないはめっちゃ不便で、それをなんとかするために同じようなコードを自前で用意するハメになる。</p>
<p>他にも <a href="https://github.com/ember-community-russia/awesome-ember">ember-community-russia/awesome-ember</a> に載っている色々なものが使えないわけだ。つらいどころか悲しくなってくる。</p>
<h3 id="自動テストが書けない">自動テストが書けない</h3>
<p>Ember.js は QUnit で自動テストができるようになっているのだが
ember-rails だとそれも使えない。すなわちフロントエンドのコンポーネントの単体テストが書けないのである。</p>
<h2 id="それでも-ember-rails-を使いたい方には">それでも ember-rails を使いたい方には</h2>
<p>どうして素直に ember-cli-rails や ember-cli そのものを使おうとしないのかはわからないけどどうしても ember-rails の世界に住みたいのであれば
<a href="https://github.com/discourse/discourse">discourse</a> のソースを参考にしたら良いと思う。</p>
<p>どうやら <a href="https://github.com/discourse/discourse/pull/11932">ember-cli に乗り換える方針で動いているよう</a> だが今日時点の Gemfile には未だに discourse-ember-source などの記述が残っている状態であり、まだ完全移行はできてない様子。</p>
<p><a href="https://rubygems.org/gems/discourse-ember-source/versions/3.12.2.2">discourse-ember-source</a> は 3.12 系まで追従していたようなのでそこまでは discourse の真似をすれば使えるだろう。</p>
<p>また彼らは ember-rails を使いながら qunit でのテストもできるようにしているようである。正直マジか頑張ったなって気持ち。ちょっとどうやって動かしているのかはわからない。あんまり調べる気力もない。なんとなくわかったことは ES6 の module システムを活用して頑張ってる雰囲気があることである。</p>
<p>他にも addon も使えるようにしている様子でもあるが、これもちょっとよくわかってない。あまり adoon が使われてる気もしないが……。</p>
<p>ともかく ember-rails を独自に拡張した上で色々頑張っているようである。すごい。それでももう ember-cli-rails に乗り換えようとしているようなので今から ember-rails の世界に住もうとするのはやめた方がいいはず。</p>
<p>あ、よく見ると Rails は 6.0 系だ。ってことは少なくとも discourse-ember-rails なら Rails 6.0 でも動くわけか。なるほど。</p>
<h2 id="で-なぜ自分は-ember-rails-で新規アプリを書いているか">で、なぜ自分は ember-rails で新規アプリを書いているか</h2>
<p>マゾなので、敢えてその環境で新規アプリを用意しておいてそこから ember-cli-rails に移行する、みたいなことをしてみたいから。</p>
<p>本当は自分で ember-rails なアプリを書くつもりはなかったんだけどサンプルになるようなアプリが探せなかったってのもある。これが Yak Shaving か〜と思いながら粛々と小さなアプリを書いていくのであった</p>
<p>できたらまた記事にする。アプリ自体は公開しないけど、ソースは GitHub に上げるつもり。</p>
]]></content>
        </item>
        
        <item>
            <title>browse-at-remote を導入した</title>
            <link>https://mugijiru.github.io/posts/add-browse-at-remote/</link>
            <pubDate>Sat, 23 Jan 2021 23:18:00 +0900</pubDate>
            
            <guid>https://mugijiru.github.io/posts/add-browse-at-remote/</guid>
            <description>仕事中、プルリクのレビューをする際に、「ここのコードがこんな感じになってるから〜」みたいな感じで既存コードへのリンクを張ることがちょくちょく</description>
            <content type="html"><![CDATA[<p>仕事中、プルリクのレビューをする際に、「ここのコードがこんな感じになってるから〜」みたいな感じで既存コードへのリンクを張ることがちょくちょくある。</p>
<p>そういうことをする時、まずそもそも差し示したいコードを確認するんだけどその時は Emacs の中で探す方が早い。で、探して確認するまではいいんだけど、そこから GitHub 上のコードへのリンクを取得しようとするとちょっと面倒。</p>
<p>これまでは、GitHub のリポジトリのトップからディレクトリを辿って行って当該コードを再度探していました。めんどくさいねっ。</p>
<p>というわけで解決する手段を探していて最近導入したのが <a href="https://github.com/rmuslimov/browse-at-remote">browse-at-remote</a> というやつ。</p>
<p>こいつを入れてる状態で、GitHub のリポジトリに突っ込んであるコードの上で
<code>M-x browse-at-remote</code> を実行すると
GitHub でのリポジトリでのコードの位置でブラウザを開いてくれる。</p>
<p>コードの上でと書いたけど、リージョンを選択していればその範囲が選択された状態で実行すると選択した行がハイライトされた状態で開いて便利。</p>
<p>その状態から GitHub 上で <code>Copy permalink</code> をしておいて
PR のコメントにコピーしたリンクを貼り付けるとコードも表示されて便利。</p>
<p>で、結構よく使うコマンドとなったので
Hydra から即呼び出せるようにしてある。</p>
<p>Global に使うコマンドを突っ込んでる Hydra は key-chord で <code>jk</code> を叩くと呼べるようにしていてその中で <code>B</code> を叩けば browse-at-point が呼ばれるようにしてある。</p>
<p>というわけで、導入と Hydra の設定を追加しているプルリクが以下になります。
<a href="https://github.com/mugijiru/.emacs.d/pull/205">https://github.com/mugijiru/.emacs.d/pull/205</a></p>
<p>という使い方をしているけど、実は似た機能を提供している <a href="https://github.com/sshaw/git-link">git-link</a> で <code>git-link-use-commit</code> のフラグを立てておいて他にもいくつか設定を入れたりしたらもっといい感じのことができるのかもしれない。今度試すか……。</p>
]]></content>
        </item>
        
        <item>
            <title>新年明けましておめでとうございます</title>
            <link>https://mugijiru.github.io/posts/happy-new-year-2021/</link>
            <pubDate>Sat, 02 Jan 2021 20:31:00 +0900</pubDate>
            
            <guid>https://mugijiru.github.io/posts/happy-new-year-2021/</guid>
            <description>&lt;p&gt;新年明けましておめでとうございます。麦汁です。昨年の終わり頃、世間では AdventCalendar で賑ってる頃に、ふと「サイトのリニューアルしたいなあ」なんてことを思って、リニューアルに着手しましたが、ようやくそれが実りそうです。&lt;/p&gt;</description>
            <content type="html"><![CDATA[<p>新年明けましておめでとうございます。麦汁です。昨年の終わり頃、世間では AdventCalendar で賑ってる頃に、ふと「サイトのリニューアルしたいなあ」なんてことを思って、リニューアルに着手しましたが、ようやくそれが実りそうです。</p>
<p>なんでそんなことをしてるかというと前の記事 <a href="/posts/starting-hugo/">Hugo 始めました</a> でも書いたように「自分が作ったサイトだっせー」ってのが1つあります。</p>
<p>それを構築した時には「デザインとかも全部自分でやっちまおう」ということで全部やろうとしていたのですがデザインセンスが壊滅的だったとか時間がろくに取れないとかやる気が他に吸われていったとかでイマイチなまま放置していました。よくないですねえ。</p>
<p>あと、そことは別にブログサービスを借りて使ってるのですがそっちはそっちで更新がだるいなってのもあってリニューアルと同時に今後のブログ更新はこっちにしてしまおう、というのもあったりします。</p>
<p>Hugo でブログもやってしまう方が <a href="https://ox-hugo.scripter.co/">ox-hugo</a> も使って記事を書き出せるので
org-mode 使い的には幸せになれそうですし。</p>
<p>あとは折角リニューアルしたんだからモチベーションが続くことを願っています。</p>
<p>というわけで 2021 年の抱負は「月に2回はブログを更新する」とします。</p>
<p>結構、緩めな抱負ですが、仕事じゃないのでこのぐらいの方が良かろう……。</p>]]></content>
        </item>
        
        <item>
            <title>Hugo 始めました</title>
            <link>https://mugijiru.github.io/posts/starting-hugo/</link>
            <pubDate>Sun, 20 Dec 2020 15:22:00 +0900</pubDate>
            
            <guid>https://mugijiru.github.io/posts/starting-hugo/</guid>
            <description>&lt;p&gt;Hugo はなんか Emacs 界隈で流行ってるし、自分のサイトだっせーなーって思ってたので
Hugo を使って、公開されてるテンプレートを適用して
Web サイトを再構築してみることにした。&lt;/p&gt;</description>
            <content type="html"><![CDATA[<p>Hugo はなんか Emacs 界隈で流行ってるし、自分のサイトだっせーなーって思ってたので
Hugo を使って、公開されてるテンプレートを適用して
Web サイトを再構築してみることにした。</p>
<p>他の静的サイトジェネレータもちょっと検討したけど機能面とかも考慮した上で Hugo がいいかなって。主な理由は「流行ってるから」ですが。ほら、流行りに乗りたいじゃん。ちょっと乗り遅れてる気もするけど。</p>
<p>今、とりあえず作ってる最中なんだけど、つい BBS とかチャットとかリンク集とか置きたくなる。
90年代または2000年代脳である。お絵描き BBS も置いたろうかって気持ちになる。</p>]]></content>
        </item>
        
    </channel>
</rss>
